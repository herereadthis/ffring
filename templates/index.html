{% extends 'base.html' %}

{% block body %}
    {% block header %}
        <h1>{% block title %}{{ title }}!{% endblock %}</h1>
    {% endblock %}
    <ul>
        {% for link in urls %}
            <li class="list_item"><a href="{{ link.url }}">{{ link.name }}</a></li>
        {% endfor %}
    </ul>
    <h2>Closest Aircraft</h2>
    <ul>
        <li class="list_item">Flight: 
            {% if nearest_aircraft['flight'] is none %}
                unknown
            {% else %}
                <span class="code_text">{{ nearest_aircraft['flight'] }}</span>
            {% endif %}
        </li>
        <li class="list_item">ICAO: <span class="code_text">{{ nearest_aircraft['icao'] }}</span></li>
        <li class="list_item">Heading: {{ nearest_aircraft['true_heading'] }}</li>
        <li class="list_item">Category: {{ nearest_aircraft['category'] }}</li>
        <li class="list_item">Direction: {{ nearest_aircraft['direction'] }}</li>
        <li class="list_item">Distance: 
            <span class="code_text">
                {% if nearest_aircraft['distance'] > 5 %}
                    {{ nearest_aircraft['distance']|round(2) }} km
                {% else %}
                    {{ (nearest_aircraft['distance'] * 1000)|round|int }} m
                {% endif %}
            </span>
        </li>
        <li class="list_item">Ground Speed: <span class="code_text">{{ nearest_aircraft['gs'] }} KT</span></li>
        <li class="list_item">HexDB: 
            <ul>
                <li class="list_item">Aircraft
                    <a href="{{ nearest_aircraft['hexdb']['aircraft_url'] }}">{{ nearest_aircraft['hexdb']['aircraft_url'] }}</a>
                </li>
                <li class="list_item">Conversion:
                    <a href="{{ nearest_aircraft['hexdb']['conversion_url'] }}">{{ nearest_aircraft['hexdb']['conversion_url'] }}</a>
                </li>
            </ul>
        </li>
    </ul>
    {% if aircraft_image is defined and aircraft_image|length  %}
        <img src="{{ nearest_aircraft['image']['src'] }}"/>
    {% else %}
        <p><em>(No image found for aircraft)</em></p>
    {% endif %}
    <h2>Weather</h2>
    <ul>
        <li class="list_item">Weather: {{ weather_report['shortForecast'] }}</li>
        <li class="list_item">Temperature: 
            <span class="code_text">{{ weather_report['temperature'] }}&deg;F</span>
        </li>
        <li class="list_item">Humidity: {{ weather_report['relativeHumidity'] }}%</li>
        <li class="list_item">Precipitation: {{ weather_report['precipitation'] }}%</li>
        <li class="list_item">Wind: {{ weather_report['windDirection'] }} at {{ weather_report['windSpeed'] }}</li>
        <li class="list_item">Interval: {{ weather_report['startTime'] }} - {{ weather_report['endTime'] }}</li>
    </ul>
    <h2>Base Station</h2>
    <ul>
        <li class="list_item">Latitude: <span class="code_text">{{ receiver_options['lat'] }}</span></li>
        <li class="list_item">Longitude: <span class="code_text">{{ receiver_options['lon'] }}</span></li>
        <li class="list_item">Timezone: <span class="code_text">{{ local_timezone_name }}</span></li>
    </ul> 
{% endblock %}
